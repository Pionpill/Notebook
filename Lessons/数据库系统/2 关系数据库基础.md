<link rel="stylesheet" href="style.css">

<h1> 关系数据库基础 </h1>
<h2> 1 关系数据结构 </h2>
<h3> 1.1 关系数据结构 </h3>
<h4> 关系数据模型常用术语 </h4>

  - 关系：二维表
  - 元组：记录(一行)
  - 属性：一列
  - 码(key)：键
  - 域：取值范围
  - 分量：元组中某一个属性值
  - 关系模式：关系名(表头)

<h3> 1.2 关系数据结构的形式化定义 </h3>
<h4> 域(Domain) </h4>

  - 定义：一组具有相同数据类型的值的集合，用D表示

<h4> 笛卡尔积 (Cartesian Product) </h4>

  - 定义：给定一组域 $D_1,D_2,\cdots D_n$（可以包含相同元素） 它们的笛卡尔积为  $D_1 \times D_2 \times \cdots \times D_n=\{(d_1,d_2,\cdots,d_n)|d_i \in D_i,i=1,2,\cdots,n\}$
    - 每一个元素 $(d_1,d_2,\cdots,d_n)$ 称为一个 n 元组，简称元组(Tuple)
      - 元组有排序，相同元素不同排序的元组不同
      - 元组中每一个元素叫分量
    - 元组中的每个值都是一个分量
  - 笛卡尔积在数据库中的实质是一个二维表

<h4> 关系 (Relation) </h4>

  - 笛卡尔积的任一子集称为域上的关系
  - 关系可以用 $R(D_1,D_2,\cdots D_n)$ 的形式表示，其中 R 为关系名，n是关系的度，也称目
  - 关系中元组的个数是关系的基数
  - 二维表每一列为了区分，起个名字称为属性，n 关系有 n 个属性，属性名唯一
  - 在数据库中，关系是笛卡尔积中所取的有意义的有限子集
  - 关系的性质
    - 任意两个元组不可以完全相同
    - 列和元组的顺序可以交换
    - `关系满足交换律但笛卡尔积不满足`
    - 分量必须取原子值

<h3> 1.3 关系模型 </h3>
<h4> 关系模型的定义 </h4>

  - 关系模型(关系模式)是对关系的描述
  - 关系是值
  - $R(U,D,dom,F)$ (简写为 $R(U)$ )
    - R: 关系名
    - U：组成关系的属性名集合
    - dom：属性与域之间的映像集合
    - F：属性间依赖关系的集合

<h3> 1.4 关系数据库 </h4>

  - 在一个给定的应用领域中，所有实体及实体之间联系的关系的集合构成一个关系数据库
  - 关系数据库的型与值
    - 关系数据库的型: 称为关系数据库模式，是对关系数据库的描述.
    - 关系数据库的值: 是这些关系模式在某一时刻对应的关系的集合，通常简称为关系数据库.

<h3> 1.5 空值 </h3>

  - 在关系元组中允许出现空值
  - 空值表示`信息的空缺`。空值表示`未知的值或不存在值`

<h3> 1.5 码 </h3>
<h4> 候选码 </h4>

  - 能`唯一标识`关系中元组的一个属性或属性集，称为候选码，也称为关键字或候选键
  - 候选码的形式化定义：`唯一性，最小性`(任一真子集都不满足唯一性)

<h4> 主码 </h4>

  - 多个候选码中选取一个
  - 主码的诸属性称为`主属性`

<h4> 外码 </h4>

  - 若属性集 $K_1$ 不是关系 $R_1$ 的主码，而是关系 $R_2$ 的主码，则称 K 为关系 $R_1$ 的外码
  - $R_1$：参照关系
  - $R_2$：被参照关系

### 1.6 完整性规则
#### 实体完整性规则
- 关系的主属性（就是俗称主键的一些字段，主键的组成部分）不能为空值
#### 参照完整性规则
- 关系的外键R1和关系R2的主键相符，那么外键的每个值必须在关系R2中主键的值中可以找到或者是空值
- 如果说在两个有关联的数据表中，一个数据表的外键（Foreigon Key）一定在另一个数据表中的主键（Primary Key）中可以找到

#### 用户自定义完整性规则
- 某一具体的实际数据库的约束条件，由应用环境所决定，反映某一具体应用所涉及的数据必须满足的要求

<h2> 2 关系的操作 </h2>
<h3> 2.1 基本关系操作 </h3>
<h4> 查询 </h4>

  - 对关系数据进行各种检索。
  - 关系查询的基本单位是元组分量，查询即定位符合条件的元组。

<h4> 更新 </h4>

  - 数据更新操作包括插入、删除和修改三种。

<h3> 2.2 关系数据语言分类 </h3>

  - 关系数据语言 <br>
    ```plantuml
    @startwbs
    * 关系数据语言
    ** 关系代数语言 ISBL
    ** 关系演算语言
    *** 元组演算语言 ALPHA
    *** 域演算语言 QBE
    ** 具关系代数与关系演算\n双重特点的语言SQL
    @endwbs
    ```


<h3> 2.3 关系代数 </h3>
<h4> 概述 </h4>

  - 关系代数
    - 一种抽象的查询语言。用对关系的运算来表达查询。
  - 关系代数表达式三个要素
    - 运算对象：关系
    - 运算结果：关系
    - 运算符：(集合，专门关系代数，比较，逻辑)

<h4> 传统集合运算 </h4>

  - 设关系 R，S
    - R: n 目关系，$k_1$个元组
    - S: m 目关系，$k_2$个元组
  - 关系代数的 4 类运算符及含义
    |    运算符类别    |    记号     |   含义   |                                 备注/举例                                 |
    | :--------------: | :---------: | :------: | :-----------------------------------------------------------------------: |
    |     集合运算     |   $\cup$    |    并    |                    具有相同目数，相应属性取自同一个域                     |
    |                  |     $-$     |    差    |                    具有相同目数，相应属性取自同一个域                     |
    |                  |   $\cap$    |    交    |                    具有相同目数，相应属性取自同一个域                     |
    |                  |  $\times$   | 笛卡尔积 |                    n+m 目关系，$k_1 \times k_2$ 个元组                    |
    | 专门的关系运算符 |  $\sigma$   |   选择   |     [行操作]  $\sigma_{\text{所在省市="南京"}}(\text{CustomerInfo})$      |
    |                  |    $\Pi$    |   投影   | [列操作] $\Pi_{\text{客户编号，客户姓名，所在省市}}(\text{CustomerInfo})$ |
    |                  |   $\Join$   |   连接   |                $R\Join S = \sigma_{X\theta Y}(R\times S)$                 |
    |                  |   $\div$    |   除法   |          S 中的元素能匹配在 R 上，结果为去除 R 元组元素的 S 元组          |
    |    比较运算符    |  $\cdots$   |    略    |
    |                  |    $<>$     |  不等于  |
    |    逻辑运算符    | $\urcorner$ |    非    |
    |                  |   $\vee$    |    或    |
    |                  |  $\wedge$   |    与    |
    - 基本运算
      - 并，差，选择，投影，笛卡尔积
    - 连接关系
      - 根据 &theta;不同，划分为等值,大于，小于连接
      - 自然连接是去掉重复列的等值连接
      - 外连接：自然连接中将舍弃的元组保留，其他属性填空值
        - 左连接：外连接只保留左边关系舍弃的元组
        - 右连接：外连接只保留右边关系舍弃的元组