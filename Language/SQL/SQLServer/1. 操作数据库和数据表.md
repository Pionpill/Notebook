<link rel=stylesheet href=style.css>

<h1> 操作数据库和数据表 </h1>

> 与 MySQL 理论相容内容略

<h2> 1 操作数据库 </h2>
<h3> 1.1 数据库的基本操作指令 </h3>

> 相对 MySQL，SQLServer 没有 ;

  - 定义数据库
    ```SQL
    CREATE DATABASE <数据库名>
    ```
  - 使用数据库
    ```
    USE <数据库名>
    ```
  - 修改数据库(名)
    ```
    ALTER DATABASE <数据库名>
    ```
  - 删除数据库
    ```
    DROP DATABASE <数据库名>
    ```

<h2> 2 操作数据表 </h2>
<h3> 2.1 数据表的基本操作指令 </h3>
<h4> 定义数据表 </h4>

  - 定义数据表指令
    ```SQL
    CREATE TABLE <数据表名> (      -- SQL 不区分大小写
        <列名> <数据类型> [约束],
        <列名> <数据类型> [约束],
        ............
        <列名> <数据类型> [约束]    -- 最后一行无需 ，
    )
    ```
  - 完整性约束
    | 约束        | 意义   | MySQL |
    | :---------- | :----- | :---- |
    | NOT NULL    | 非空   |
    | DEFAULT     | 默认值 |
    | UNIQUE      | 唯一   |
    | CHECK       | 检查   | 无    |
    | PRIMARY KEY | 主键   |
    | FOREIGN KEY | 外键   |
  - 约束举例
    ```SQL
    CREATE TABLE table1(
        id int NOT NULL
        name varchar(20) DEFAULT'Pionpill',       -- 默认值格式
        class varchar(20),
        PRIMARY KEY (id,name),                    -- 多主键约束
        FOREIGN KEY (name) REFERENCE table2(name) -- 外键
    )
    ```

<h4> 修改基本表 </h4>

  - 修改基本表指令
    ```SQL
    ALTER TABLE <基本表名>
        ALTER COLUMN <列名> <新数据类型> [约束]     -- 修改已有列定义
        ADD <列名> <数据类型> [约束]                -- 增加新列
        DROP COLUMN <列名>                         -- 删除列
        ADD [CONSTRAINT <约束名>] <约束定义>        -- 添加约束
        DROP CONSTRAINT <约束名>                    -- 删除约束
    ```

<h4> 删除基本表 </h4>

  - 删除基本表指令
    ```SQL
    DROP TABLE <基本表名>
    ```

<h3> 2.2 索引定义 </h3>
<h4> SQL Server 索引 </h4>

  - 聚簇索引
    - 按关键字重新排列后存储在磁盘上，一般按主关键字排列
    - 一个数据表只能由一个聚簇索引
  - 非聚簇索引
    - 完全独立于数据的索引结构，类似于创建一个哈希表
    - 一个数据表可以创建多个非聚簇索引

<h4> 索引基本操作 </h4>

  - 建立索引指令
    ```SQL
    CREATE [UNIQUE][CLUSTERED/NONCLUSTERED]     -- 默认为 NONCLUSTERED 非聚簇索引
    INDEX <索引名>
    ON <基本表名> (<列名>[ASC|DESC][{,<列名>[ASC|DESC]}...])  -- ASC|DESC 升序降序
    ```
  - 索引举例
    ```SQL
    CREATE UNIQUE NONCLUSTERED INDEX index1
        ON table1 (column1 ASC,column2 DESC)
    ```
  - 删除索引指令
    ```SQL
    DROP INDEX <基本表名><索引名>
    ```

<h3> 2.3 数据查询 </h3>
<h4> SELECT 语句结构 </h4>

  - SELECT 语句基本格式
    ```SQL
    SELECT [ALL|DISTINCT] <column1,column2,...>   -- 指定输出分量
        FROM <表1名/视图1名> [,<表2名/视图2名>...]  -- 指定数据来源
        [WHERE <条件表达式>]            -- 指定过滤条件
        [GROUP BY <列名1>]              -- 指定按分组表达式
        [HAVING <条件表达式>]           -- 指定分组过滤条件
        [ORDER BY <列名2> [ASC|DESC]]   -- 指定排序表达式和顺序
    ```
<h4> SELECT 语句分量 </h4>

  - 