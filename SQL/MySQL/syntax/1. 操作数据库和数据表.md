<link href="style.css" rel="stylesheet">

<h1> 操作数据库和数据表 </h1>
<h2> 1 创建数据库 </h2>
<h4> 创建与查看数据库指令 </h4>

  - 创建数据库：
    ```SQL
    CREATE DATABASE database_name;
    ```
  - 查看创建好的数据库的定义：
    ```SQL
    SHOW CREATE DATABASE database_name\G
    ```

<h2> 2 删除数据库 </h2>
<h4> 删除数据库指令 </h4>

  - 删除数据库：
    ```SQL
    DROP DATABASE database_name;
    ```

<h2> 3 创建数据表 </h2>
<h3> 3.0 概述  </h3>
<h4> 常用指令 </h4>

  - 常用指令集
    |          指令          |    用处    |
    | :--------------------: | :--------: |
    |     USE <数据库名>     | 使用数据表 |
    | CREATE TABLE <表名>(); | 创建数据表 |
    |      SHOW TABLES;      | 显示数据表 |
  - 常用约束关键字
    |               关键字               |    用处    |
    | :--------------------------------: | :--------: |
    |            PRIMARY KEY             |  主键约束  |
    | FOREIGN KEY <...> REFERENCES <...> |  外键约束  |
    |              NOT NULL              |  非空约束  |
    |               UNIQUE               | 唯一键约束 |
    |              DEFAULT               |  默认约束  |
    |           AUTO_INCREMENT           |  自动增加  |

<h3> 3.1 创建表的语法形式 </h3>

  - 使用数据表
    ```SQL
    USE <数据库名>
    ```
  - 创建数据表
    ```SQL
    CREATE TABLE <表名>
    (
      字段名1  数据类型 [列级别约束条件] [默认值],
      字段名2  数据类型 [列级别约束条件] [默认值],
      ......
      [表级别约束条件]
    );
    ```
  - 显示数据表
    ```SQL
    SHOW TABLES;
    ```

<h3> 3.2 使用主键约束 </h3>
<h4> 主键的概念 </h4>

  - 主键约束要求主键列的数据唯一，并且不能为空
  - 主键能够唯一地标识表中地一条记录

<h4> 单字段主键 </h4>

  - 定义列的同时定义主键
    ```SQL
    字段名 数据类型 PRIMARY KEY [默认值]
    ```
  - 定义列之后定义主键
    ```SQL
    [CONSTRAINT <约束名>] PRIMARY KEY [字段名]
    ```
<h4> 多字段联合主键 </h4>

  - 语法规则
    ```SQL
    PRIMARY KEY [字段1,字段2,...,字段n]
    ```

<h3> 3.3 使用外键约束 </h3>
<h4> 外键的概念 </h4>

  - 外键用来在两个表地数据之间建立连接
  - 外键可以为空值，若不为空值，则每一个外键值必须等于另一个表中主键的额某个值
  - 外键可以不是本表的主键，但对应另一个表的主键
  - 外键的主要作用是保证数据引用的完整性
    - 主表：对于两个具有关联关系的表而言，相关联字段中主键所在的那个表就是主键
    - 从表：对于两个具有关联关系的表而言，相关联字段中外键所在的那个表就是从表

<h4> 外键的基本操作 </h4>

  - 创建外键
    ```SQL
    [CONSTRAINT <外键名>] FOREIGN KEY 字段名1 [,字段名2,...] REFERENCES <主表名> 主键列1 [,主键列2,...]
    ```

<h3> 3.4 使用非空约束 </h3>
<h4> 定义非空约束 </h4>

  - 定义数据表时、
    ```SQL
    字段名 数据类型 NOT NULL
    ```

<h3> 3.5 使用唯一性约束 </h3>
<h4> 唯一性约束的概念 </h4>

  - 唯一性约束可以为空，但至多出现一个空值

<h4> 定义唯一性约束 </h4>

  - 定义列之后直接指定唯一性约束
    ```SQL
    字段名 数据类型 UNIQUE
    ```
  - 定义完所有列之后指定唯一性约束
    ```SQL
    [CONSTRAINT <约束名>] UNIQUE (<字段名>)
    ```

<h3> 3.6 使用默认约束 </h3>
<h4> 默认约束的概念 </h4>

  - 默认约束指定某列的默认值

<h4> 默认约束的语法 </h4>

  - 定义默认约束
    ```SQL
    字段名 数据类型 DEFAULT 默认值
    ```

<h3> 3.7 设置表的属性值自动增加 </h3>
<h4> 自动添加的概念 </h4>

  - 在数据库中添加新的记录时，通过关键字 AUTO_INCREMENT 系统自动生成字段的主键值
  - 在 MySQL 中,AUTO_INCREMENT 初始值为1,以后递加
  - 一个表只能有一个字段使用 AUTO_INCREMENT 约束，且必须为主键的一部分
  - AUTO_INCREMENT 约束的字段可以是任何整数类型

<h4> 定义自动添加 </h4>

  - 定义列表之后直接指定
    ```SQL
    字段名 数据类型 AUTO_INCREMENT
    ```

<h2> 4 查看数据表结构 </h2>
<h3> 4.1 查看表基本结构语句 DESCRIBE </h3>
<h4> 基本结构概念 </h4>

  - 该语句可以查看表的字段信息，其中包括: 字段名，字段数据类型...
<h4> 语法规则 </h4>

  - 全称/缩写语法
    ```SQL
    DESCIRBE 表名;
    DESC 表名;
    ```
  - 各字段含义
    |  字段   |                                                   含义                                                    |
    | :-----: | :-------------------------------------------------------------------------------------------------------: |
    |  NULL   |                                            是否可以存储NULL值                                             |
    |   Key   | 表示改列是否编制索引。<br> PRI：是主键一部分; <br> UNI: UNIQUE一部分 <br> MUL: 列中某个给定值允许出现多次 |
    | Default |                                               是否有默认值                                                |
    |  Extra  |                                       附加信息，如: AUTO_INCREMENT                                        |

<h3> 4.2 查看表详细结构语句 SHOW CREATE TABLE </h3>
<h4> 语法规则 </h4>

  - 查看指令
    ```SQL
    SHOW CREATE TABLE <表名\G>;
    ```
    如果不加 \G 显示结果会非常混乱
    
<h2> 5 修改数据表 </h2>
<h3> 5.1 修改表名 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    ALTER TABLE <旧表名> RENAME [TO] <新表名>;
    ```

<h3> 5.2 修改字段的数据类型 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    ALTER TABLE <表名> MODIFY <字段名> <数据类型>;
    ```

<h3> 5.3 修改字段名 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    ALTER TABLE <表名> CHANGE <旧字段名> <新字段名> <新数据类型>;
    ```

<h3> 5.4 添加字段 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    ALTER TABLE <表名> ADD <新字段名> <数据类型> [约束条件] [FIRST|AFTER 已存在字段名];
    ```

<h3> 5.5 删除字段 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    ALTER TABLE <表名> DROP <字段名>;
    ```

<h3> 5.6 修改字段排列位置 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    ALTER TABLE <表名> MODIFY <字段1> <数据类型> FIRST|AFTER <字段2>;
    ```

<h3> 5.7 删除表的外键约束 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    ALTER TABLE <表名> DROP FOREIGN KEY <外键约束名>;
    ```

<h2> 6 删除数据表 </h2>
<h3> 6.1 删除没有关联的表 </h3>
<h4> 语法规则 </h4>

  - 指令
    ```SQL
    DROP TABLE [IF EXISTS] 表1,表2,...,表n;
    ```
    - 参数 IF EXISTS 用于在删除前判断删除的表是否存在。加上后若不存在，能顺序指令并返回警告。否则返回错误

<h3> 6.2 删除被其他表关联的主表 </h3>
<h4> 语法规则 </h4>

  - 概念
    - 如果直接删除父表，将破坏参照表的完整性
    - 可以先删除子表，再删除父表，但通常达不到想要的效果
    - 先解除两个表的关联，再进行删除操作
  - 指令
    ```SQL
    ALTER TABLE <表名> DROP FOREIGN KEY <外键约束名>;
    DROP TABLE <表名>;
    ```